"use strict";(self.webpackChunkl9sal7qj_s296rtrjvyq=self.webpackChunkl9sal7qj_s296rtrjvyq||[]).push([[3572],{24493:(e,t,n)=>{n.d(t,{f:()=>d});var r=n(87363),a=n.n(r),l=n(60611),i=n(33924),o=n(52438),s=n(33497),c=n(66244),m=n(469);const u=(0,l.N)("brief-grid-gallery-compact"),d=({items:e,onClickItem:t,topFlattened:n=!1,bottomFlattened:l=!1,withS2s:d=!1,theme:p,l10n:v,logger:h})=>{const g=(0,m.Z)((e=>{const n=e.currentTarget,r=Number(n.dataset.index);null==t||t(r)})),b=(0,r.useMemo)((()=>(0,c.jR)(e,void 0,h).map((({type:t,isGifStub:n,video:r,image:l,isVideoNotConvertedStub:o,imageViewerIndex:c},m)=>{const h="video"===t,b=e.length+(d?1:0),_=null==r?void 0:r.duration,E=1===e.length&&h,w=a().createElement(s.G,{isCompact:!0,imagesCount:b,index:m,theme:p,isVideoItem:h,duration:_,isSingleVideoItem:E,l10n:v,isVideoStub:n});if(m>=3)return;const f=b>3&&2===m;return a().createElement("div",{className:u("box"),key:m},a().createElement(i.Y,{className:u("image"),src:l.link,mainColor:l.meta.mainColor,placeholderImage:l.blurredLink,onClick:!n&&!o||f?g.current:void 0,overlay:!o&&w,"data-index":c}))}))),[e,d,p,v,g,h]);return a().createElement("div",{className:u({previewCount:(0,o.uZ)(e.length,0,3),previewSquare:2===e.length,topFlattened:n,bottomFlattened:l})},a().createElement("div",{className:u("content")},a().createElement("div",{className:u("list")},b[0],b[1],b[2])))}},7167:(e,t,n)=>{n.d(t,{L:()=>d});var r=n(87363),a=n.n(r),l=n(60611),i=n(52438),o=n(33924),s=n(10703),c=n(33497),m=n(66244);const u=(0,l.N)("brief-grid-gallery"),d=({items:e,onClickItem:t,theme:n,platform:l,logger:i,topFlattened:s=!1,bottomFlattened:d=!1,withS2s:p=!1,l10n:v})=>{const h=e[0],g=("image"===h.type||"video"===h.type&&!h.videoNotConvertedStub)&&h.image.width<=h.image.height,b=g?"row":"column",E=g?"column":"row",w=(0,r.useMemo)((()=>(0,m.jR)(e,_(b,e,l),i).map((({type:r,isGifStub:l,image:i,video:m,isVideoNotConvertedStub:h,imageViewerIndex:g},_)=>{const E="video"===r,w=e.length+(p?1:0),y=null==m?void 0:m.duration,k=a().createElement(c.G,{isCompact:!1,imagesCount:w,index:_,theme:n,isVideoItem:E,duration:y,l10n:v,isVideoStub:l}),x=f(b,_,e.length),C=w>4&&3===_;return a().createElement("div",{className:u("box"),key:_},a().createElement("div",{className:u("item")},a().createElement(o.Y,{className:u("image",{position:x,topFlattened:s,bottomFlattened:d,clickable:Boolean(t)}),src:i.link,mainColor:i.meta.mainColor,placeholderImage:i.blurredLink,onClick:!l&&!h||C?()=>null==t?void 0:t(g):void 0,overlay:!h&&k})))}))),[b,e,l,i,p,n,v,s,d,t]),y=(0,r.useMemo)((()=>w.length<2?w[0]:2===w.length?a().createElement("div",{className:u("box",{layout:b})},w[0],w[1]):3===w.length?a().createElement("div",{className:u("box",{layout:b})},w[0],a().createElement("div",{className:u("box",{layout:E})},w[1],w[2])):a().createElement("div",{className:u("box",{layout:"row"})},a().createElement("div",{className:u("box",{layout:"column"})},w[0],w[1]),a().createElement("div",{className:u("box",{layout:"column"})},w[2],w[3]))),[w,b,E]);return a().createElement("div",{className:u({platform:l})},a().createElement("div",{className:u("content")},y))},p={square:"lazy_smart_crop_356x356",album:"lazy_smart_crop_720x356",portrait:"lazy_smart_crop_356x720"},v={full:"lazy_smart_crop_1280x720",quarter:"lazy_smart_crop_636x356",portraitHalf:"lazy_smart_crop_636x720",albumHalf:"lazy_smart_crop_1280x356"},h={row:[["full"],["portraitHalf","portraitHalf"],["portraitHalf","quarter","quarter"],["quarter","quarter","quarter","quarter"]],column:[["full"],["albumHalf","albumHalf"],["albumHalf","quarter","quarter"],["quarter","quarter","quarter","quarter"]]},g={row:[["square"],["portrait","portrait"],["portrait","square","square"],["square","square","square","square"]],column:[["square"],["album","album"],["album","square","square"],["square","square","square","square"]]},b=e=>(0,i.uZ)(e,0,3),_=(e,t,n)=>{const r=(a=t.length,(0,i.uZ)(a,1,4)-1);var a;if(n===s.t.mobile){const t=g[e][r];return e=>p[t[b(e)]]}const l=h[e][r];return e=>v[l[b(e)]]},E=["top-left","bottom-left","top-right","bottom-right"],w={row:{2:["left","right"],3:["left","top-right","bottom-right"]},column:{2:["top","bottom"],3:["top","bottom-left","bottom-right"]}},f=(e,t,n)=>{const r=(0,i.uZ)(n,1,4);switch(r){case 1:return"full";case 2:case 3:return w[e][r][t];default:return E[(0,i.uZ)(t,0,3)]}}},33497:(e,t,n)=>{n.d(t,{G:()=>_});var r=n(87363),a=n.n(r),l=n(60611),i=n(13974),o=n(83137),s=n(86680),c=n(23242),m=n.n(c),u=n(62508),d=n.n(u),p=n(68129);let v=new(m())({id:"play-unavailable_ce9d--inline",use:"play-unavailable_ce9d--inline-usage",viewBox:"0 0 40 40",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" id="play-unavailable_ce9d--inline">\n<path d="M32.845 34.512c.651-.651.651-1.706 0-2.357L6.178 5.488a1.667 1.667 0 1 0-2.357 2.357L10 14.024v18.169a2.5 2.5 0 0 0 3.81 2.129l10.207-6.282 6.471 6.472c.65.65 1.706.65 2.357 0Zm-11.251-8.894-8.26-8.261v13.344l8.26-5.083Zm12.03-3.49-3.77 2.32-2.424-2.422 3.293-2.027-13.83-8.51-5.77-5.77a2.5 2.5 0 0 1 2.687-.041L33.623 17.87a2.5 2.5 0 0 1 0 4.258Z" fill="currentColor" />\n</symbol>'});const h=(0,p.Z)(d(),v);n(14072);function g(e){const t=Math.floor(Number(e)/60).toString(),n=Math.round(Number(e)%60).toString(),r=e=>1===e.length?`0${e}`:e;return`${r(t)}:${r(n)}`}const b=(0,l.N)("brief-grid-overlay-item"),_=({isCompact:e,imagesCount:t,index:n,theme:r,isVideoItem:l,duration:i,isSingleVideoItem:c,isVideoStub:m,l10n:u})=>{const d=e?t>3&&2===n:t>4&&3===n,p=d?a().createElement(E,{count:t,isCompact:e}):m?a().createElement(w,{theme:r,isVideoStub:!0},a().createElement("div",{className:b("video-stub-image")},a().createElement(o.P,{symbol:h})),a().createElement("div",{className:b("video-stub-text")},null==u?void 0:u("common.video_unavailable"))):null,v=a().createElement(a().Fragment,null,void 0!==i?a().createElement("div",{className:b("duration",{isSingleVideoItem:c})},g(i)):null,d?a().createElement(E,{count:t,isCompact:e}):a().createElement(a().Fragment,null,a().createElement("div",{className:b("play")},a().createElement(o.P,{symbol:s.Z})),a().createElement(w,{theme:r})));return l?v:p},E=({count:e,isCompact:t})=>a().createElement("div",{className:(0,i.C)(b("more-overlay",{isCompact:t}))},t?"и ещё "+(e-3):"+"+(e-4)),w=({theme:e,isVideoStub:t,children:n})=>a().createElement("div",{className:b("fade-overlay",{theme:e,isVideoStub:t})},n)},66244:(e,t,n)=>{n.d(t,{m:()=>o,ee:()=>s,vY:()=>c,jR:()=>m});n(14072),n(53208);var r=n(27002),a=n(23106),l=n(10703),i=n(52438);const o=({hasImage:e,hasEmbed:t,hasRepost:n,platform:r})=>e||t||n?r===l.t.desktop?3:5:8,s=e=>{const t=((e,t=.2,n=.8)=>{const r=[t,n],[a,l,o]=e;return[a,l,(0,i.uZ)(o,...r)]})((0,a.oD)(e),.2,1);return(0,a.vq)(...(0,a.ve)(...t))},c=2e3,m=(e,t,n)=>{const a=(e=>{if(1!==e.length)return"lazy_smart_crop_356x356"})(e);let l=-1;return e.map(((e,i)=>{if("video"===e.type&&e.videoNotConvertedStub){const{stubImage:t="https://static.dzeninfra.ru/s3/zen-misc/images/video_processing.png"}=e;return Object.assign({},e,{isGifStub:!1,isVideoNotConvertedStub:!0,video:void 0,imageViewerIndex:0,image:{link:t,blurredLink:"",width:1920,height:1080,meta:{mainColor:""}}})}const{link:o,blurredLink:s}=(0,r.vH)(e.image,(null==t?void 0:t(i))||a||"scale_1200",n),{isGifStub:c=!1}="image"===e.type?e:{},{video:m}="video"===e.type?e:{};return c||(l+=1),Object.assign({},e,{isGifStub:c,isVideoNotConvertedStub:!1,video:m,imageViewerIndex:c?0:l,image:Object.assign({},e.image,{link:o,blurredLink:s})})}))}},15353:(e,t,n)=>{n.d(t,{L:()=>a});n(96439);var r=n(76271);const a=e=>{const t=String(Math.floor(e/r.p7)),n=String(Math.floor(e/r.uD%r.oG)),a=String(Math.floor(e/r.s_%r.ks)),l=String(Math.floor(e%r.s_)),i="0"!==t,o="0"!==l&&"0"===t&&"0"===n&&"0"===a;return[i&&`${t}:`,`${n.padStart(i?2:1,"0")}:`,a.padStart(2,"0"),o&&`.${l.padStart(3,"0")}`].filter(Boolean).join("")}},86154:(e,t,n)=>{n.d(t,{x:()=>S});var r=n(87363),a=n.n(r),l=n(10703),i=n(89885),o=n(56991),s=n(83849),c=n.n(s);const m="share-context-menu__button-3h",u="share-context-menu__button_theme_black-2F",d="share-context-menu__button_theme_portal-1N",p="share-context-menu__header-1F",v="share-context-menu__header_theme_black-1C",h="share-context-menu__header_theme_portal-2q",g="share-context-menu__items-Hl";var b=n(40789),_=n(70742),E=n(89186),w=n(78906);const f=({l10n:e,link:t,theme:n,platform:l,title:i,host:o,onCopy:s,onShare:c,iconsSize:m,isRedesign:u,isHorizontal:d,isRepostEnabled:p=!0})=>{const v=(0,r.useMemo)((()=>{let e=d?E.xl:u?E.Z2:E.YS;return p||(e=e.filter((e=>"repost"!==e.type))),e}),[d,u,p]);return a().createElement(a().Fragment,null,v.map((r=>a().createElement(w.W,{key:r.type,item:r,theme:n,platform:l,link:t,title:i,host:o,l10n:e,onClick:c,onCopy:s,iconSize:m,isRedesign:u,isHorizontal:d}))))};var y=n(37972);const k=(0,_.r)("button"),x=({hideMenu:e,sharingLink:t,repostUrl:n,l10n:r,title:l,theme:i,host:o,onShare:s,isRedesign:_,platform:E,isLive:w,isRepostEnabled:x=!0})=>{const C=Boolean(n)&&x;return a().createElement(y.U.Provider,{value:{repostUrl:w?void 0:n}},a().createElement("div",{className:c()(p,{[v]:i===b.D.black,[h]:i===b.D.portal})},r("channel.channel.share")),a().createElement("div",{className:c()(g),onTouchMove:e=>e.stopPropagation()},a().createElement(f,{l10n:r,link:t,title:l,theme:i,platform:E,host:o,onShare:s,onCopy:e,iconsSize:"l",isRedesign:_,isHorizontal:!0,isRepostEnabled:C})),a().createElement(k,{"aria-label":r("comments.close"),onClick:e,className:c()(m,{[u]:i===b.D.black,[d]:i===b.D.portal})},r("comments.close")))},C=()=>null,N=({renderTrigger:e,l10n:t,theme:n,platform:l,link:s,repostUrl:c,title:m,host:u,onShare:d,onOpen:p,isBodyScrollEnabled:v,targetRef:h,onContextMenuToggle:g,isRedesign:b,isLive:_,isRepostEnabled:E=!0})=>{const{drawerMenuManagerRef:w,closeMenu:f}=(0,i.U)(),y=(0,r.useCallback)((e=>{e&&p&&p(),g&&g(e)}),[g,p]),k=(0,r.useCallback)((e=>(w.current=e,a().createElement(x,{l10n:t,sharingLink:s,repostUrl:c,title:m,hideMenu:f,theme:n,platform:l,host:u,onShare:d,isRedesign:b,isLive:_,isRepostEnabled:E}))),[w,t,s,c,m,f,n,l,u,d,b,_,E]);return a().createElement(o.T,{renderParentMenu:k,renderNestedMenu:C,renderTrigger:e,l10n:t,theme:n,isBodyScrollEnabled:v,targetRef:h,onContextMenuToggle:y,isHorizontal:!0})},S=({host:e,l10n:t,theme:n,stats:i,isBodyScrollEnabled:o=!0,item:s,clid:c,onContextMenuToggle:m,isRepostEnabled:u})=>{var d;const p=null==i?void 0:i.clickShare;return(0,r.useCallback)((r=>{var i;if(!s.shareLink&&!s.link)return null;const d=["short_video","gif"].includes(s.type||s.itemType||""),v=s.shareLink||s.link||"",h=null==(i=s.sharingMenu)?void 0:i.repostUrl,g=d?h||s.shareLink||s.link||"":void 0;return a().createElement(N,{renderTrigger:r,l10n:t,theme:n,platform:l.t.mobile,repostUrl:g||h,link:v,title:s.title||"",host:e,onOpen:p,isBodyScrollEnabled:o,clid:c,onContextMenuToggle:m,isRedesign:!0,isLive:"live"===s.itemType,isRepostEnabled:u})}),[s.shareLink,s.link,null==(d=s.sharingMenu)?void 0:d.repostUrl,s.title,s.itemType,s.type,t,n,e,p,o,c,m,u])}},89885:(e,t,n)=>{n.d(t,{l:()=>a,U:()=>l});n(14072),n(53208);var r=n(87363);const a=()=>{const[e,t]=(0,r.useState)(!1),n=(0,r.useRef)(),a=(0,r.useCallback)((()=>{n.current&&(t(!0),n.current.openNestedMenu())}),[]),l=(0,r.useCallback)((()=>{n.current&&(t(!1),n.current.closeNestedMenu())}),[]);return{isNestedMenuVisible:e,drawerManagerRef:n,openNestedMenu:a,hideNestedMenu:l}},l=()=>{const e=(0,r.useRef)(),t=(0,r.useCallback)((()=>{e.current&&e.current.openMenu()}),[]),n=(0,r.useCallback)((()=>{e.current&&e.current.closeMenu()}),[]);return{drawerMenuManagerRef:e,openMenu:t,closeMenu:n}}},68719:(e,t,n)=>{n.d(t,{v:()=>B});n(14072),n(53208);var r=n(87363),a=n.n(r),l=n(83849),i=n.n(l),o=n(17306),s=n(73928),c=n(19670),m=n(23242),u=n.n(m),d=n(62508),p=n.n(d);const v=new(u())({id:"check_ebb8--react",use:"check_ebb8--react-usage",viewBox:"0 0 10 8",content:'<symbol viewBox="0 0 10 8" fill="none" xmlns="http://www.w3.org/2000/svg" id="check_ebb8--react">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M9.67267 0.760847C10.0813 1.13347 10.1114 1.76781 9.73994 2.1777L4.77521 7.65527C4.37194 8.1002 3.67973 8.11672 3.25581 7.69154L0.292893 4.71973C-0.0976311 4.32804 -0.0976311 3.69297 0.292893 3.30128C0.683417 2.90958 1.31658 2.90958 1.70711 3.30128L3.96553 5.56647L8.26006 0.828316C8.63157 0.418433 9.26402 0.388226 9.67267 0.760847Z" fill="black" />\n</symbol>'});function h(e){return p().add(v),a().createElement("svg",(0,c.Z)({viewBox:"0 0 10 8"},e),a().createElement("use",{xlinkHref:"#check_ebb8--react"}))}h.displayName="SpriteSymbolComponent(check_ebb8--react)";var g=n(32976);const b={anonymityTypeAnonymous:{ru:"анонимный опрос",_context:""},errorMessage:{ru:"Что-то пошло не так, и нам не удалось загрузить опрос",_context:""}},_=(0,g.Wh)(b),E=((0,g.bN)(b),"poll-view__poll-3H"),w="poll-view__viewTypeDefault-30",f="poll-view__isDesktop-1N",y="poll-view__isAnswered-1r",k="poll-view__variant-3J",x="poll-view__viewTypeRepost-2i",C="poll-view__title-2u",N="poll-view__subtitle-3d",S="poll-view__variantsList-2l",M="poll-view__resultTitle-8k",L="poll-view__resultPercents-3E",T="poll-view__resultPercentsBar-36",q="poll-view__spinner-24",I="poll-view__checkIcon-2H",R="poll-view__isLoading-1R",z="poll-view__hasError-2t",H="poll-view__error-17",V="poll-view__myAnswer-yr",j=()=>a().createElement("div",{className:H},a().createElement(_.errorMessage,null)),A=(0,r.memo)((({isAnswered:e,items:t,onAnswer:n,loadingIndex:l})=>{const o=(0,r.useCallback)((t=>!e&&!l&&n(t)),[e,l,n]),c=e=>()=>o(e);return a().createElement("div",{className:i()(S,{[y]:e})},t.map((({text:t,isMyAnswer:n,percentages:r},o)=>a().createElement("div",{key:o,className:i()(k,{[V]:n}),onClick:c(o)},a().createElement("div",{className:T,style:{width:e?`${Math.round(r)}%`:0}}),a().createElement("div",{className:M},t),n&&a().createElement(h,{className:I}),a().createElement("div",{className:L},r,"%"),a().createElement(s.$,{size:16,className:i()(q,{[R]:l===o})})))))})),B=(0,r.memo)((({poll:e,onVote:t,viewType:n="default"})=>{var l;const s=Boolean(null==e||null==(l=e.result)?void 0:l.myAnswers.length),[c,m]=(0,r.useState)(!1),[u,d]=(0,r.useState)(),p=(0,o.dD)(),v=(0,r.useCallback)((async n=>{if(void 0!==u||!t)return;d(n);const r=Array.from({length:e.items.length}).map(((e,t)=>n===t));try{await t(e.pollId,r)}catch(e){m(!0)}d(void 0)}),[e,u,d,m,t]),h=(0,r.useMemo)((()=>e.items.map(((t,n)=>({text:t.text,isMyAnswer:!!e.result&&e.result.myAnswers[n],percentages:e.result?e.result.percentages[n]:0,answers:e.result?e.result.answers[n]:0})))),[e]);return a().createElement("div",{className:i()(E,{[w]:"default"===n,[x]:"repost"===n,[y]:s,[f]:!p,[z]:c})},c&&a().createElement(j,null),a().createElement("div",{className:C},e.title),a().createElement("div",{className:N},a().createElement(_.anonymityTypeAnonymous,null)),a().createElement(A,{isAnswered:s,loadingIndex:u,items:h,onAnswer:v}))}))},20810:(e,t,n)=>{n.d(t,{K:()=>de});n(14072),n(53208);var r=n(87363),a=n.n(r),l=n(2213);const i="repost-view-header__header-2V",o="repost-view-header__logo-1c",s="repost-view-header__name-3S",c="repost-view-header__themeBlack-2M",m="repost-view-header__themePortal-2G",u="repost-view-header__verified-2I",d="repost-view-header__time-wz";var p=n(99498),v=n(40789),h=n(13974),g=n(46764),b=n(27002);const _=({repost:e,logger:t,theme:n})=>{const{source:{name:r,logo:l,isVerified:_},creationTime:E}=e,w=n===v.D.black?c:n===v.D.portal?m:void 0;return a().createElement("div",{className:i},l&&a().createElement(p.qE,{className:o,iconSize:24,src:(0,b.o4)(l,l.sizeName,void 0,t)}),r&&a().createElement("div",{className:(0,h.C)(s,w)},r),_&&a().createElement(g.$,{className:u,size:12,markTheme:n===v.D.black?g.U.light:g.U.default}),E&&a().createElement("div",{className:(0,h.C)(d,w)},E))};var E=n(10703),w=n(49390);const f=e=>{const t=e.split("\n");return 1===t.length?{json:[{data:e,type:"text"}],length:e.length}:{json:t.reduce(((e,t)=>(e.length&&e.push({type:"tag",name:"br",attribs:{},children:[]}),e.push({type:"text",data:t}),e)),[]),length:e.length}};var y=n(3114),k=n(92106);var x=n(35618),C=n(84336),N=n(15353),S=n(83137),M=n(27598);const L="repost-view-video-overlay__videoOverlay-18",T="repost-view-video-overlay__duration-13",q="repost-view-video-overlay__live-39",I=({duration:e,isLive:t,l10n:n})=>a().createElement("div",{className:L},a().createElement(S.P,{symbol:M.Z,width:32,height:32}),e?a().createElement("div",{className:T},(0,N.L)(1e3*e)):null,t&&a().createElement("div",{className:q},n("common.video_live_stream_label")));var R=n(7167),z=n(33566),H=n(73386),V=n(24493),j=n(20969),A=n(57732),B=n(66989),F=n(17510),$=n(68719),Z=n(83849),D=n.n(Z);const U="20",O="14",P="18",G="repost-view__repost-Cu",W="repost-view__themeBlack-3o",Y="repost-view__themePortal-2O",J="repost-view__title-gs",K="repost-view__titleRedesign-I5",Q="repost-view__text-29",X="repost-view__isArticle-2f",ee="repost-view__withTitle-1J",te="repost-view__embed-2W",ne="repost-view__image-2c",re="repost-view__poll-2P",ae="repost-view__hasText-1w",le="repost-view__clickable-1g",ie=parseInt("15",10),oe=parseInt(U,10),se=parseInt(O,10),ce=parseInt(P,10),me=Object.assign({},A.C8,{spaceHeight:0,fontSize:ie,lineHeight:oe}),ue=Object.assign({},me,{fontSize:se,lineHeight:ce}),de=({className:e,mentions:t,repost:n,logger:i,theme:o,platform:s,renderClickable:c,largeMobileBriefMediaAspectRatio:m=!1,isRezenFeedRedesignUnifiedCards:u,onShow:d,l10n:p})=>{const h=o===v.D.black?W:o===v.D.portal?Y:void 0,g=(e=>{switch(e.itemType){case l.iE.native:return e.content.title;case l.iE.gif:case l.iE.brief:case l.iE.live:}})(n),N=(({repost:e,mentions:t})=>{switch(e.itemType){case l.iE.brief:{const{richText:n}=e.content,r=n&&(0,w.a)({json:n.json,mentions:t});return r?(0,y.FW)(r):r}case l.iE.native:return(0,w.a)({json:f(e.content.text).json,mentions:t});case l.iE.gif:return(0,w.a)({json:f(e.content.title).json,mentions:t});case l.iE.live:}})({repost:n,mentions:t}),S=((e,t)=>{switch(e.itemType){case l.iE.brief:{const{items:n}=e.content;if(1!==n.length)return;const{image:r}=n[0],{blurredLink:a,link:l}=(0,b.vH)(r,"scale_1200",t);return Object.assign({},r,{link:l,blurredLink:a,mainColor:r.meta.mainColor})}case l.iE.gif:case l.iE.native:case l.iE.live:{const{image:n}=e.content;if(n){const{blurredLink:e,link:r}=(0,b.vH)(n,"scale_1200",t);return Object.assign({},n,{link:r,blurredLink:e,mainColor:n.meta.mainColor})}return}}})(n,i),M=(e=>{if(e.itemType!==l.iE.brief)return;const{items:t}=e.content;return t.length>1?t.map(k.UO):void 0})(n),L=(e=>{var t;if(e.itemType===l.iE.brief)return null==(t=e.content.embed)?void 0:t.src})(n),T=(e=>{switch(e.itemType){case l.iE.brief:{const{items:t,embed:n}=e.content;return Boolean(t.length||n)}case l.iE.native:return Boolean(e.content.image);case l.iE.gif:case l.iE.live:return!0}return!1})(n),q=(e=>{if(e.itemType===l.iE.brief)return e.content.poll})(n),A=n.itemType===l.iE.native,Z=(e=>{switch(e.itemType){case l.iE.brief:{const{items:t}=e.content;if(1!==t.length)return;const[n]=t;if("video"!==n.type)return;return n.video}case l.iE.gif:return e.content.video}})(n),U=Z||n.itemType===l.iE.live,[O,P]=(0,z.O)(),ie=(0,r.useRef)(!1);(0,H.m)((()=>P),(e=>{e&&!ie.current&&(ie.current=!0,null==d||d())}));const se=s===E.t.mobile?R.L:V.f,ce=Boolean(null==N?void 0:N.length);return a().createElement("div",{ref:O,className:D()(G,h,e,{[ae]:ce})},a().createElement(_,{repost:n,logger:i,theme:o}),g&&!u&&a().createElement("div",{className:D()(J,h)},g),N&&a().createElement("div",{className:D()(Q,Boolean(g)&&!u&&ee,A&&X,h)},u&&A?a().createElement(a().Fragment,null,a().createElement(x.x,{linesCount:2,text:g||"",previewLineHeightPx:oe,className:K}),a().createElement(F.m,{size:F.x.S}),a().createElement(j.o,{theme:o,data:N,maxLinesCount:3,fullCommentText:p("common.expand2"),shouldExpand:!1,withAnimation:!1})):a().createElement(j.o,{theme:o,data:N,maxLinesCount:T?3:6,shouldExpand:!1,fullCommentText:"",withAnimation:!1,textStyle:A?ue:me})),S?a().createElement("div",{className:ne},a().createElement(C.H,{width:S.width,height:S.height,maxAspectRatio:m&&s===E.t.mobile?B.$$:B.wV,src:S.link,mainColor:S.mainColor,blurredLink:S.blurredLink,theme:o,withFade:!1}),U&&a().createElement(I,{duration:Z&&Z.duration,isLive:n.itemType===l.iE.live,l10n:p})):M?a().createElement("div",{className:ne},a().createElement(se,{logger:i,items:M,onClickItem:void 0,theme:o,platform:s,topFlattened:!0,bottomFlattened:!0,l10n:p})):q?a().createElement("div",{className:re},a().createElement($.v,{poll:q,viewType:"repost"})):L?a().createElement("div",{className:D()(te,h)},a().createElement(x.x,{linesCount:1,text:L,previewLineHeightPx:oe})):null,null==c?void 0:c(le))}},23106:(e,t,n)=>{n.d(t,{wZ:()=>a,vq:()=>l,ve:()=>o,IA:()=>s,_T:()=>c,oD:()=>m});n(14072),n(53208),n(17453);const r=e=>{let t=e.match(/^#([0-9a-f]{3})$/i);if(t){const e=t[1];return[17*parseInt(e.charAt(0),16),17*parseInt(e.charAt(1),16),17*parseInt(e.charAt(2),16)]}if(t=e.match(/^#([0-9a-f]{6})$/i),t){const e=t[1];return[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16)]}return t=e.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),t?[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]:null},a=e=>r(e)||[0,0,0],l=(e,t,n)=>{const r=(e<<16|t<<8|n).toString(16).toUpperCase();return`#${new Array(7-r.length).join("0")+r}`},i=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),o=(e,t,n)=>{let r,a,l;if(0===t)r=a=l=n;else{const o=n<.5?n*(1+t):n+t-n*t,s=2*n-o;r=i(s,o,e+1/3),a=i(s,o,e),l=i(s,o,e-1/3)}return[255*r,255*a,255*l]},s=(e,t=1)=>{const[n,r,a]=e;return`hsla(${360*n}, ${100*r}%, ${100*a}%, ${t})`},c=(e,t,n)=>Math.sqrt(e*e*.299+t*t*.587+n*n*.114)/255<.53,m=e=>{const t=r(e);if(!t)return[0,0,0];const[n,a,l]=t;return(([e,t,n])=>{let r=t,a=n;if(t+n>.7){let e=.7/(t+n);a=n*e,a>.5&&(e=.5/n,a=n*e),r=t*e}return r<.1&&(r=0,a=Math.min(n,.5)),[e,r,a]})(((e,t,n)=>{e/=255,t/=255,n/=255;const r=Math.max(e,t,n),a=Math.min(e,t,n),l=(r+a)/2,i=r-a;if(0===i)return[0,0,l];const o=l>.5?i/(2-r-a):i/(r+a);switch(r){case e:return[((t-n)/i+(t<n?6:0))/6,o,l];case t:return[((n-e)/i+2)/6,o,l];case n:return[((e-t)/i+4)/6,o,l];default:throw new Error("never happens")}})(n,a,l))}}}]);